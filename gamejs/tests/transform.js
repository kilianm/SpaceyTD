var gamejs = require('gamejs');
qModule('gamejs/transform');

test('flip', function() {
   var surfaceEqual = QUnit.surfaceEqual;

   var surface = new gamejs.Surface([40, 70]);
   gamejs.draw.lines(surface, '#ff0000', false, [[5,0], [10, 55], [15, 50], [20,65], [30,0]], 5);
   gamejs.draw.lines(surface, '#0000ff', true, [[1,1], [39,1], [39,69],[1,69]], 2);

   surfaceEqual(gamejs.transform.flip(surface, true, false), "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAABGCAYAAAC+ANZHAAACzElEQVRogc2XvVEjURCEx1ACeOudQZEAHhHgEISCgCIFLBLAlU8CWLjgUWQg44oAzsCgz+DVlfToeT8zzQlVjaNd9X6qWW1/MjPg546ZHR6iC7lHu/eC2Qn5xBs7N/qC2QO5xvko4Apm7yTgSAj4QvJPhwBLwCsJOBMCvpH8ZQbwngSsRXArmH1U2R8wW80A3hDAGxHg4t/j44BrEnIvAjwl2S+zgGck5FUEeE6yH2YBj0jI++d9kgZk29lMAZYg9ks7EQBekdzbCOAjCboQAN6S3KsI4B0JuhQAbvxH2BzgJQm6EwA6NTcPeEGCHgWATs3NA36LNDg/viUCKJcGNGtuErAESqUBzZqLAUqlAc2aiwFKpQHNmosBSqXBydtkAKXSgGbNxQCl0oBmzQUAS6hMGtCsuTigTBrQrLk4oEwa0Ky5OKBMGpzbZckCSqQB3ZqLA0qkAd2aiwNKpAHdmgsClvC0NKBbcznAtDSgW3M5wLQ0oFtzOcC0NKBbcznAtDSgW3M5wLQ0oFtzCcBygZQ0oFtzecCUNDhfcKnOSgGGpQFDNZcHDEsDhmouDxiWBgzVXB4wLA0Yqrk8YFgaMFRzScByoZA0YKjmNIAhacBQzWkAu9IAs1+oHuAYqjkNYFcaYHYNs+0uJIZqTgPYlQaYPZX3/0FiqOY0gE1pgNlxdWyLz8fTQM0JAAuEKw1lvfWxLYZqTgfoSgPMnskxNs4DXgNIpYGstzWk5nSAVBqc9XpDak4HSKVhYr0ArTkdIJOGPw7Ib+d9UnM6QE8a6nkuX2ZLjpGaEwEWSCYN9VyXcxnk+rsBmTTUc7xzfg1Jak4LyKRhb73kM7uQpOa0gEwavqy3AUlqTgvIpIGu14F0/vDrAJk0uOudSNYAFkgmDe56DwHIpKG53v8NyKQhsV49IJOGxHr1gEwaEuvVA9bSkFwvBfypc3CA9vwF+SwugRmhOlMAAAAASUVORK5CYII=");

   surfaceEqual(gamejs.transform.flip(surface, false, true), "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAABGCAYAAAC+ANZHAAAC7ElEQVRogc3WMVIjMRAF0B9wATJnG7h8AWecwAmH8CGgfAUiLkBKzgWISJeM4gYEWxxgAwKagJkt0fMltbql2qFqkhmr9Wxh/w9AZN3XfweYgbE/AZ7V5F1wYj+gAFvy1i/XBDwR4NWagPp4RYC7VQAzxysCPK0FyI5XBHhfC5Ad73ydDwUKcFb6uSgc73xdjAZuBHjLIQvHO1/H0cD99JAiK8crAtyMBh6SzX4gDccrAjyMBh7Vhv+QhuMVAV5HA6/Jpm8C7AzHKwJ8CHA2Enib2fhP5v5fcs9ZGmzAe8OnNF/PAjyR+87SYAM+NgBPAtyR+87SYAO+NAC3AlyR+87SYAO+W493ev0leeYsDRWgfMfcp9rsU76/xYvjndbsyDNnaagDN2yzCaGR2+RNfZB1jtJQB+7JRi/TsxT5W617JescpaEOPJCNHpPnM/Kk1j2QdccRQB1zIsC9es1OgF/q3g1Z5ygNdSCLudvqWP7GHKWhDmQxd20AXpB1jtJQB7KYOxqA52SdozTUgSzmDqbR/Ae+sTTUgSzm9kZgh9JQB7JPYWMEdigNBaDkY870fyRdSkMZSGPOPLpLaSgDszFnBHYoDWVgMeYMwA6loQysxpwBGSwNZaAr5tSMYGkoA10xp2YES0MZ6Io5NSNYGspAd8wlM4KloQx0x1wyI1gaykB3zBnmGEtDBijBmFPAQGnIA0Mxp4CB0pAHhmJOAQOlIQ8MxZwCBkpDHhiOuWRWoDTkgeGYS2YFSkMeGI45hXSWhjwwHHMK6CwNeWA45hTQWRrywHDMKaCzNOSBXWIumecsDQQoHWMuATpLAwd2izmFdJQGDuwWcwroKA0c2C3mFNBRGjiwW8wpoKM0cGC3mFNAR2ngwK4xlwAdpYEDu8ZcAnSUBg7sGnMK2VgaOLBrzClgY2ngwK4xp4CNpUEBZUDMKWBjaVgCh8RcAmwsDUvgkJhLgI2lYQkcEnMK2VAaFl+StV4/tOu7vgAC5S6BbTRqVQAAAABJRU5ErkJggg==");

   surfaceEqual(gamejs.transform.flip(surface, true, true), "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAABGCAYAAAC+ANZHAAAC5ElEQVRogc2WsU0DQRBFJ3ADZGQEiAbIqICEIlwEyC0Q0QApOQ0QkUKG6MABogACAoaARTrGf3f/zswKI11yvvn3fGPuPxFR3e/j3wFoQP+fipyY1OdIXklNBbwAX/14nwAvAeBmnwBvAWBwzbmAj5VfeGDNuYDvFcDAmpMAVeSg8Y4IrDkP8KzzIquuubyeVrMB1x1AuOYCt1WRw9mA1x3AnTUv4FRFTmcD3ncA/6zZwKmKnM8GfCUANxU4VZH1NEAVWanIJwH4XIFTFbmaCWglQVXkowL5Vjl/MxMQScJjeWK9p/p73M0ERJJwqyKbAcCHmYBIEi5V5HgA8GUmIJKEi/IZu+b3mYBIEk7KZ2jNWxX5Mue+FNZdEFCxJHz+3gyseas///XoS4G6iwMiSXg11zwt4cq5FzAH6i4OiCTh3lyzWcKVcw9gDtRdHBBJwrW55mgJV87dgbn1DEAkCeBGO3M3YA7UXRwQScIZMXcF5kDdBQC1LgkHxCz67YK6iwEiSai8cHdmz8EsqLsYIJQEcvYUzIK6iwFCSSBnD7mnHwOEkkDOrpSquxhgVRLIeaLuYoBVSSDnibpzAmpHEsgMou78gF1JIDKIuvMDdiWByCDqzg/YlQQig6g7P6BLEkwGUXd+QJckmAyi7hyAGpAEk0PUnQ/QLQkmh6g7H6BbEkwOUXc+QLckgKxO3fkA3ZIAsjp15wMMSYLJ6tSdDzAkCSarU3eDgJogCSavU3fjgGFJMHmduhsHDEsCkbeou3HAsCSYvE7djQOGJcHkdepuHDAsCSavU3cDgJokCSCzUXdjgCmSAHIbdTcGmCIJILdRd2OAaZJgcht1NwaYJgkmt1F3Y4BpkmByG3U3BpgmCSa3UXckoCZLgslu1B0PmCoJJrtRdzxgqiSY7Ebd8YCpkmCyG3XHA6ZKgslu1B0PmCoJIL9SdwSgTpAEcI9K3XGAUyTB3KNSdzuA+3r8O0ATTr4BzmIugfql89YAAAAASUVORK5CYII=");

});

test('rotate', function() {
   var surfaceEqual = QUnit.surfaceEqual;

   var surface = new gamejs.Surface([40, 70]);
   gamejs.draw.lines(surface, '#ff0000', false, [[5,0], [10, 55], [15, 50], [20,65], [30,0]], 5);
   gamejs.draw.lines(surface, '#0000ff', true, [[1,1], [39,1], [39,69],[1,69]], 2);

   surfaceEqual(gamejs.transform.rotate(surface, 90), "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAoCAYAAABD0IyuAAABo0lEQVRoge3WvXHCMBjG8X/BAunSpeBYgC4TpMkQDEEuK6RigbTpWYCKNnRcNqDIMUAKCp4UiByYSLYsbMtCz93bYU7PTy8fgJSnOED3h4h1zpVuLoKB4F4wFjwlDVMsK5gIXgQzwYdgIVgLtoL96ar0DiakrM9EAdNW2ShgYizbGEzfy5bM3px7LVj4wowEmwhK1CprLm9mLnNiLndsLntQaFsdJhKcgLI+8YRpCKelsj6pAQOVcCIs65OaMFCKsxGMGjp1CwmAgT+c7/Rw6n+UhoJXwark+6OnOB4wHhgJ4JTABGAc59M8/9BBu4D8A3MFjJV5fthxu4AUYG4b4zSXMHXmR7AUvAumgmcdfq0i/H9SNdeBsc1O8CWYC950+GP3KLjrunZ5moVxzTbuLbuEGZlDTs2hl6ZEW2CRbFkBxvoyuDMHnJgDz02BXZpbVhHGATZIc8sCYZxv3estaxDGAdaDLesAxpVYtiw6GFva3rLewLjSxJYlAWNLyJYlDeNK2ZbdLIwtxy3LMNZkGEsyjCUZxpIMY8kFTJ7z6fwAcc4v81sugfKX8YYAAAAASUVORK5CYII=");

   surfaceEqual(gamejs.transform.rotate(surface, 180), "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAABGCAYAAAC+ANZHAAAC5ElEQVRogc2WsU0DQRBFJ3ADZGQEiAbIqICEIlwEyC0Q0QApOQ0QkUKG6MABogACAoaARTrGf3f/zswKI11yvvn3fGPuPxFR3e/j3wFoQP+fipyY1OdIXklNBbwAX/14nwAvAeBmnwBvAWBwzbmAj5VfeGDNuYDvFcDAmpMAVeSg8Y4IrDkP8KzzIquuubyeVrMB1x1AuOYCt1WRw9mA1x3AnTUv4FRFTmcD3ncA/6zZwKmKnM8GfCUANxU4VZH1NEAVWanIJwH4XIFTFbmaCWglQVXkowL5Vjl/MxMQScJjeWK9p/p73M0ERJJwqyKbAcCHmYBIEi5V5HgA8GUmIJKEi/IZu+b3mYBIEk7KZ2jNWxX5Mue+FNZdEFCxJHz+3gyseas///XoS4G6iwMiSXg11zwt4cq5FzAH6i4OiCTh3lyzWcKVcw9gDtRdHBBJwrW55mgJV87dgbn1DEAkCeBGO3M3YA7UXRwQScIZMXcF5kDdBQC1LgkHxCz67YK6iwEiSai8cHdmz8EsqLsYIJQEcvYUzIK6iwFCSSBnD7mnHwOEkkDOrpSquxhgVRLIeaLuYoBVSSDnibpzAmpHEsgMou78gF1JIDKIuvMDdiWByCDqzg/YlQQig6g7P6BLEkwGUXd+QJckmAyi7hyAGpAEk0PUnQ/QLQkmh6g7H6BbEkwOUXc+QLckgKxO3fkA3ZIAsjp15wMMSYLJ6tSdDzAkCSarU3eDgJogCSavU3fjgGFJMHmduhsHDEsCkbeou3HAsCSYvE7djQOGJcHkdepuHDAsCSavU3cDgJokCSCzUXdjgCmSAHIbdTcGmCIJILdRd2OAaZJgcht1NwaYJgkmt1F3Y4BpkmByG3U3BpgmCSa3UXckoCZLgslu1B0PmCoJJrtRdzxgqiSY7Ebd8YCpkmCyG3XHA6ZKgslu1B0PmCoJIL9SdwSgTpAEcI9K3XGAUyTB3KNSdzuA+3r8O0ATTr4BzmIugfql89YAAAAASUVORK5CYII=");

   surfaceEqual(gamejs.transform.rotate(surface, 45), "data:image/png;base64,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");

   surfaceEqual(gamejs.transform.rotate(surface, 0), "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAABGCAYAAAC+ANZHAAACx0lEQVRogc2ZvU0DQRSEX+AGyJwRWDTgjAqcUISLANECEQ2QOncDjkhxhujAAaIAAgKGgLVkLbO77+9kLG1y55v77p7v5pMsIiIiwP9dZwdQAkJkRfbuJPEDkQ9yjqvGt/8ALsnBr4lwFyT/CyIzLeCcBHwkAl6T/LfOEX8AZxD5rgK+21doBlwTwK0asISw38g8CfCBZD9YAV9JyDIJcEuy11bAHQlZJQG+kexrK+DGdpVquFl5YuvsCyvgIwm5SwC8sr8hOOAdCXpMALwhuc8eQPYq2CQA3pLcJw/gJHUHkSeSe+sBnKTuIPJMcm88gJPUHUyS0AdMrzuYJaED2Llad93BLAljwNS6a7wZOpIwBkytO5glYQyYWncwS8IYMLXuYJaEMWBa3cElCWPAtLqDSxLGgGl1B5ckjAHT6g4uSRgDptUdXJIwBkyrO7gkYQBYglPqrpEzkAQdYLju4JYEHWC47uCWBB1guO7glgQdYLju4JYEHWC47uCWBB1guO7glgQdYKjuEJIEHWCo7hCSBB1gqO4QkgQdYKjuEJIEBWA5ibvuEJIEPaC77hCSBD2gu+4ad18pCXpAV90hLAl6QFfdISwJekBX3SEsCXrAYd3h94V8WW0LSoIesFt3Be4AkfvquKAk6AGbdXcCB4i8VMcFJUEPSOuugjuuRTkmQRL0gK26q+FwHDNSJEEJWE7IXrhs7cv3EyTBBsjqrrUWSJEEGyCru9a6R4ok2ABZ3TXHjBRJsAGyugNE3hvbP8k2oyTYAFndHcrTulfcVYck2ADrujsc70j5zY0AHZJgA1wxuLJvoQB0SIINcMngTvaPxuyQBBvgvAVX9o/GvJ4acNZ7ChVjdkiCAVAV0x+zQxLyAVtjDv6NmwfYGrNTEpIBCyQbs1MSpgFkY3ZKwjSAbMxOSZgAsEDWY3ZKQhPwv66zA/TXDy2vLoEwImZNAAAAAElFTkSuQmCC");

   surfaceEqual(gamejs.transform.rotate(surface, 370), "data:image/png;base64,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");
});


test('scale', function() {
   var surfaceEqual = QUnit.surfaceEqual;

   var surface = new gamejs.Surface([40, 70]);
   gamejs.draw.lines(surface, '#ff0000', false, [[5,0], [10, 55], [15, 50], [20,65], [30,0]], 5);
   gamejs.draw.lines(surface, '#0000ff', true, [[1,1], [39,1], [39,69],[1,69]], 2);

   surfaceEqual(gamejs.transform.scale(surface, [20, 20]), "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABUElEQVQ4jZXUL0hDURgF8CP4B8uiKxYtBhGDGDToC5ZZBOvWNRjEJFbFNkxisLhsFUz6ghO0LpgmWCaGoWDQCeox7Cjfm/e++97gwr2c8/14bxsXADmFxlOEmHO4fgcYh9Y47psRYkaIOYRO3WQEQBLYY/f0SaAPgQ+BU/WbPckfWFaBBCYygC/qHvnAGQOuBLBZ0131gcOmtB0Ad9T7JlBwgio+qHgSAC/Vu3GkCfBcxdsUbJDAl3q7IfBAxdcUsGS+msUQuGbKox6wqrzj/nslwQUDLnnAhvIzzzskwBEDbjiwosk3g6CG2ho4dIAVA05mBa80cOEAa8pabswNHmvokUCBwB2BsrKWsloecMu81u9qE5g250oecNkMvpn9s9kX84Bj7F5h6zrv9zxtw485QCEDZt9vfnkSqOYG/1WSd2UpI5h+5c+j/uG47l2LP1imc1AazyFjAAAAAElFTkSuQmCC");

   surfaceEqual(gamejs.transform.scale(surface, [20, 35]),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAABhklEQVRIia3UsW3CYBQE4HMXKKmZgIo2JRIDJBXsQMEGlAzAAJQoC1AgImUB2AGJDUKVIrk0z9Yz/PceSCBZwvLxyZa5A8AvgHzeAZLA2s7OuONDYGH5PwJdd6UBlxb4IVDdAW4sf7q60oBzd8+9O8CjZXcKnDpwkGAVgYtlVwocOXCUgH2XnSlw4ELTBBy77FiBPReaJ+DMZfsKrOwNk8AyAVeWu9z+Iwy04NmC6wTcWe5YuNoCDxbcJuDJcpsM3FrwEGBdawcJLDIwrR+BoXshkwxM60dg4sBhBqb106NQBtP66VEog2n99CiUwbB+8SiUwbB+8SiUwbB+8SgUQPuRrF88ChqU9YtHQYOt+hHoEHix78EoaLCpn2F7Am92LRgFDfr67WsgHwUN+vrVxzeBV3deGAUNTgsgCXy474VR0KCv36fdHQn8MhwFDdb129tL2Vzd6UljZbBXY3b+fgWKUdBgVWN23nGPHYyCAIuR9mOLUXgM9I8tRuEx0D+2GIUb8HnHPxV8dKapGsj4AAAAAElFTkSuQmCC");

   surfaceEqual(gamejs.transform.scale(surface, [80, 140]), "data:image/png;base64,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");

   surfaceEqual(gamejs.transform.scale(surface, [50, 70]), "data:image/png;base64,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");

});
